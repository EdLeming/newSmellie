<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>sepia.slm &mdash; SMELLIE  documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="SMELLIE  documentation" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">SMELLIE  documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for sepia.slm</h1><div class="highlight"><pre>
<span class="kn">from</span> <span class="nn">_sepia</span> <span class="kn">import</span> <span class="n">string_buffer</span><span class="p">,</span> <span class="n">dll</span><span class="p">,</span> <span class="n">raise_on_error_code</span><span class="p">,</span> <span class="n">SepiaLogicError</span>
<span class="kn">import</span> <span class="nn">ctypes</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Laser Driver Functions (SLM)</span>
<span class="sd">From the original C-API: SLM 828 modules can interface the huge families of pulsed laser diode heads (LDH series) and pulsed LED heads (PLS series) from PicoQuant. These functions let the application control their working modes and intensity.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="nd">@raise_on_error_code</span>
<div class="viewcode-block" id="get_pulse_parameters"><a class="viewcode-back" href="../../sepia.html#sepia.slm.get_pulse_parameters">[docs]</a><span class="k">def</span> <span class="nf">get_pulse_parameters</span><span class="p">(</span><span class="n">dev_id</span><span class="p">,</span> <span class="n">slot_id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;get_pulse_parameters(dev_id, slot_id)</span>
<span class="sd">    Get the pulse paramters for the SLM module</span>

<span class="sd">    :param dev_id: the sepia device number (ordered from 0)</span>
<span class="sd">    :type dev_id:  int</span>

<span class="sd">    :param slot_id: slot number, integer 000-989</span>
<span class="sd">    :type slot_id:  int</span>
<span class="sd">    </span>
<span class="sd">    :returns: freq the frequency mode of the module</span>
<span class="sd">    :type freq: int</span>
<span class="sd">    </span>
<span class="sd">    :returns: pulse_mode In pulse mode? Otherwise continous (disabled)</span>
<span class="sd">    :type pulse_mode: bool</span>
<span class="sd">    </span>
<span class="sd">    :returns: head_type</span>
<span class="sd">    :type head_type: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">freq</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_int32</span><span class="p">()</span>
    <span class="n">pulse_mode</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_ubyte</span><span class="p">()</span>
    <span class="n">head_type</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_int32</span><span class="p">()</span>
    <span class="n">dll</span><span class="o">.</span><span class="n">SEPIA2_SLM_GetPulseParameters</span><span class="p">(</span><span class="n">dev_id</span><span class="p">,</span> <span class="n">slot_id</span><span class="p">,</span> <span class="n">freq</span><span class="p">,</span> 
                                       <span class="n">pulse_mode</span><span class="p">,</span> <span class="n">head_type</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">freq</span><span class="p">,</span> <span class="n">pulse_mode</span><span class="p">,</span> <span class="n">head_type</span>
</div>
<span class="nd">@raise_on_error_code</span>
<div class="viewcode-block" id="set_pulse_parameters"><a class="viewcode-back" href="../../sepia.html#sepia.slm.set_pulse_parameters">[docs]</a><span class="k">def</span> <span class="nf">set_pulse_parameters</span><span class="p">(</span><span class="n">dev_id</span><span class="p">,</span> <span class="n">slot_id</span><span class="p">,</span> <span class="n">freq_mode</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;set_pulse_parameters(dev_id, slot_id, freq_mode)</span>
<span class="sd">    Set the pulse paramters for the SLM module</span>
<span class="sd">    the original C-API has a parameter </span>
<span class="sd">    bPulseMode = (1 for pulsing, 0 for continous light).</span>
<span class="sd">    mode zero can cause damage to the laser heads and so bPulseMode </span>
<span class="sd">    is hard coded to 1 here.    </span>

<span class="sd">    :param dev_id: the sepia device number (ordered from 0)</span>
<span class="sd">    :type dev_id:  int</span>

<span class="sd">    :param slot_id: slot number, integer 000-989</span>
<span class="sd">    :type slot_id:  int</span>
<span class="sd">    </span>
<span class="sd">    :param freq_mode: index into list of frequencies/trigger modi 0 - 7</span>
<span class="sd">    :type freq_mode: int</span>

<span class="sd">    :returns: None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">freq_mode</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">8</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">SepiaLogicError</span><span class="p">(</span><span class="s">&quot;decode_freq_trig_mode: trigger mode must be 0-7&quot;</span><span class="p">)</span>

    <span class="c"># last parameter is the pulse mode! DO NOT CHANGE (see above)</span>
    <span class="n">dll</span><span class="o">.</span><span class="n">SetPulseParamters</span><span class="p">(</span><span class="n">dev_id</span><span class="p">,</span> <span class="n">slot_id</span><span class="p">,</span> <span class="n">freq_mode</span><span class="p">,</span> <span class="n">c_ubyte</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</div>
<span class="nd">@raise_on_error_code</span>
<div class="viewcode-block" id="decode_freq_trig_mode"><a class="viewcode-back" href="../../sepia.html#sepia.slm.decode_freq_trig_mode">[docs]</a><span class="k">def</span> <span class="nf">decode_freq_trig_mode</span><span class="p">(</span><span class="n">freq_mode</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;decode_freq_trig_mode(freq_mode)</span>
<span class="sd">    Translate the frequency response trigger mode to a string for any SLM</span>
<span class="sd">    module</span>
<span class="sd">    </span>
<span class="sd">    :param freq_mode: must be 0-7</span>
<span class="sd">    :type freq_mode: int</span>
<span class="sd">    </span>
<span class="sd">    :returns: mode_sring</span>
<span class="sd">    :type mode_string: string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">if</span> <span class="ow">not</span> <span class="n">freq_mode</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">8</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">SepiaLogicError</span><span class="p">(</span><span class="s">&quot;decode_freq_trig_mode: trigger mode must be 0-7&quot;</span><span class="p">)</span>
    
    <span class="n">buff</span> <span class="o">=</span> <span class="n">string_buffer</span><span class="p">()</span>
    <span class="n">dll</span><span class="o">.</span><span class="n">SEPIA2_SLM_DecodeFreqTrigMode</span><span class="p">(</span><span class="n">freq_mode</span><span class="p">,</span> <span class="n">buff</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">buff</span>
</div>
<span class="nd">@raise_on_error_code</span>
<div class="viewcode-block" id="get_intensity_fine_step"><a class="viewcode-back" href="../../sepia.html#sepia.slm.get_intensity_fine_step">[docs]</a><span class="k">def</span> <span class="nf">get_intensity_fine_step</span><span class="p">(</span><span class="n">dev_id</span><span class="p">,</span> <span class="n">slot_id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;get_intensity_fine_step(dev_if, slot_id)</span>
<span class="sd">    Get the current intensity value of a fiven SLM driver module in </span>
<span class="sd">    per mille of the laser head controlling voltage</span>

<span class="sd">    :param dev_id: the sepia device number (ordered from 0)</span>
<span class="sd">    :type dev_id:  int</span>

<span class="sd">    :param slot_id: slot number, integer 000-989</span>
<span class="sd">    :type slot_id:  int</span>
<span class="sd">    </span>
<span class="sd">    :returns: intensity</span>
<span class="sd">    :type intensity: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">intensity</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_ushort</span><span class="p">()</span>
    <span class="n">dll</span><span class="o">.</span><span class="n">SEPIA2_SLM_GetIntensityFineStep</span><span class="p">(</span><span class="n">dev_id</span><span class="p">,</span> <span class="n">slot_id</span><span class="p">,</span> <span class="n">intensity</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">intensity</span>
    
    </div>
<span class="nd">@raise_on_error_code</span>
<div class="viewcode-block" id="set_intensity_fine_step"><a class="viewcode-back" href="../../sepia.html#sepia.slm.set_intensity_fine_step">[docs]</a><span class="k">def</span> <span class="nf">set_intensity_fine_step</span><span class="p">(</span><span class="n">dev_id</span><span class="p">,</span> <span class="n">slot_id</span><span class="p">,</span> <span class="n">intensity</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;set_intensity_fine_step(dev_id, slot_id, intensity)</span>
<span class="sd">    Set the intensity value of a given SLM driver module, in per mille</span>
<span class="sd">    of laser head controlling voltage</span>

<span class="sd">    :param dev_id: the sepia device number (ordered from 0)</span>
<span class="sd">    :type dev_id:  int</span>

<span class="sd">    :param slot_id: slot number, integer 000-989</span>
<span class="sd">    :type slot_id:  int</span>
<span class="sd">    </span>
<span class="sd">    :param intensity: </span>
<span class="sd">    :type intensity: int</span>

<span class="sd">    :returns: None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">intensity</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mf">1e3</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="n">SepiaLogicError</span><span class="p">(</span><span class="s">&quot;set_intensity_fine_step: fine step is in per mille - must be 0 - 1000&quot;</span><span class="p">)</span>
    <span class="n">dll</span><span class="o">.</span><span class="n">SEPIA2_SLM_SetIntensityFineStep</span><span class="p">(</span><span class="n">dev_id</span><span class="p">,</span> <span class="n">slot_id</span><span class="p">,</span> <span class="n">intensity</span><span class="p">)</span>

</div>
<span class="nd">@raise_on_error_code</span>
<div class="viewcode-block" id="decode_head_type"><a class="viewcode-back" href="../../sepia.html#sepia.slm.decode_head_type">[docs]</a><span class="k">def</span> <span class="nf">decode_head_type</span><span class="p">(</span><span class="n">head_type_code</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;decode_head_type(head_type)</span>
<span class="sd">    Returns the head type string at list position head_type for any SLM </span>
<span class="sd">    module</span>
<span class="sd">    </span>
<span class="sd">    :param head_type_code: must be 0-3</span>
<span class="sd">    :type head_type_code: int</span>

<span class="sd">    :returns: head_type</span>
<span class="sd">    :type head_type: string    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">head_type_code</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">SepiaLogicError</span><span class="p">(</span><span class="s">&quot;decode_head_type:: head_type must be 0-3&quot;</span><span class="p">)</span>

    <span class="nb">type</span> <span class="o">=</span> <span class="n">string_buffer</span><span class="p">()</span>
    <span class="n">dll</span><span class="o">.</span><span class="n">SEPIA2_SLM_DecodeHeadType</span><span class="p">(</span><span class="n">head_type_code</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">type</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Christopher Jones, Jeff Lidgard, Luca Cavalli, Krishanu Majumdar, Jack Dunger.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.2</a>
      
    </div>

    

    
  </body>
</html>